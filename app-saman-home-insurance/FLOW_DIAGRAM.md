# Damage Declaration Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DAMAGE DECLARATION WIZARD                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Insurance Info (Creates ID)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL: /damageDeclaration                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                           â”‚
â”‚  ğŸ“‹ Insurance Info Form:                                 â”‚
â”‚     â€¢ Mobile Number                                      â”‚
â”‚     â€¢ National ID                                        â”‚
â”‚     â€¢ Insurance Approval Phone (optional)                â”‚
â”‚     â€¢ Birth Date                                         â”‚
â”‚                                                           â”‚
â”‚  ğŸ”„ API: POST /api/damage-declaration/create             â”‚
â”‚  ğŸ“¦ Response: { id: "abc123" }                           â”‚
â”‚                                                           â”‚
â”‚  âœ… Submit â†’ Navigate to Step 2 with ID                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
Step 2: Insurance Policy
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL: /damageDeclaration/insurancePolicy/abc123          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                           â”‚
â”‚  ğŸ“‹ Insurance Policy Form:                               â”‚
â”‚     â€¢ Policy Number                                      â”‚
â”‚     â€¢ Policy File Upload                                 â”‚
â”‚     â€¢ Other Insurance (Yes/No)                           â”‚
â”‚       - Company Name (if yes)                            â”‚
â”‚       - Policy Number (if yes)                           â”‚
â”‚       - Case Number (if yes)                             â”‚
â”‚                                                           â”‚
â”‚  ğŸ”„ API: PATCH /api/damage-declaration/abc123/update     â”‚
â”‚                                                           â”‚
â”‚  â¬…ï¸  Previous | Next â¡ï¸                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
Step 3: Accident Details
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL: /damageDeclaration/accident/abc123                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                           â”‚
â”‚  ğŸ“‹ Accident Form: (TO BE IMPLEMENTED)                   â”‚
â”‚     â€¢ Accident Date                                      â”‚
â”‚     â€¢ Accident Time                                      â”‚
â”‚     â€¢ Accident Location                                  â”‚
â”‚     â€¢ Description                                        â”‚
â”‚     â€¢ Police Report Number (optional)                    â”‚
â”‚                                                           â”‚
â”‚  ğŸ”„ API: PATCH /api/damage-declaration/abc123/update     â”‚
â”‚                                                           â”‚
â”‚  â¬…ï¸  Previous | Next â¡ï¸                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
Step 4: Damaged Items
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL: /damageDeclaration/cases/abc123                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                           â”‚
â”‚  ğŸ“‹ Damaged Items Form: (TO BE IMPLEMENTED)              â”‚
â”‚     â€¢ Item 1:                                            â”‚
â”‚       - Name                                             â”‚
â”‚       - Description                                      â”‚
â”‚       - Estimated Value                                  â”‚
â”‚       - Photos                                           â”‚
â”‚     â€¢ [+ Add Item]                                       â”‚
â”‚                                                           â”‚
â”‚  ğŸ”„ API: PATCH /api/damage-declaration/abc123/update     â”‚
â”‚                                                           â”‚
â”‚  â¬…ï¸  Previous | Next â¡ï¸                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
Step 5: Beneficiaries
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL: /damageDeclaration/documents/abc123                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                           â”‚
â”‚  ğŸ“‹ Beneficiaries Form: (TO BE IMPLEMENTED)              â”‚
â”‚     â€¢ Beneficiary 1:                                     â”‚
â”‚       - Full Name                                        â”‚
â”‚       - National ID                                      â”‚
â”‚       - Relationship                                     â”‚
â”‚       - Phone Number                                     â”‚
â”‚       - Bank Account (optional)                          â”‚
â”‚     â€¢ [+ Add Beneficiary]                                â”‚
â”‚                                                           â”‚
â”‚  ğŸ”„ API: PATCH /api/damage-declaration/abc123/update     â”‚
â”‚                                                           â”‚
â”‚  â¬…ï¸  Previous | Next â¡ï¸                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
Step 6: Review & Submit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URL: /damageDeclaration/review/abc123                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                           â”‚
â”‚  ğŸ“‹ Review Summary: (TO BE IMPLEMENTED)                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚ âœ… Insurance Info         [Edit]    â”‚             â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚     â”‚ âœ… Insurance Policy       [Edit]    â”‚             â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚     â”‚ âœ… Accident Details       [Edit]    â”‚             â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚     â”‚ âœ… Damaged Items          [Edit]    â”‚             â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚     â”‚ âœ… Beneficiaries          [Edit]    â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                           â”‚
â”‚  â˜‘ï¸  I agree to terms and conditions                     â”‚
â”‚                                                           â”‚
â”‚  ğŸ”„ API: POST /api/damage-declaration/abc123/submit      â”‚
â”‚                                                           â”‚
â”‚  â¬…ï¸  Previous | ğŸ“¤ Submit                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    âœ… SUCCESS!
            Navigate to success page or home


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    DATA FLOW

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Each Step:                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚                                                         â”‚
â”‚  1. Load data from localStorage                        â”‚
â”‚     Key: "damage-declaration-form-data-{id}"           â”‚
â”‚                                                         â”‚
â”‚  2. User fills/edits form                              â”‚
â”‚                                                         â”‚
â”‚  3. On change: Update localStorage                     â”‚
â”‚                                                         â”‚
â”‚  4. Temporary Save button:                             â”‚
â”‚     â€¢ Save to localStorage                             â”‚
â”‚     â€¢ (Optional) Save to backend API                   â”‚
â”‚     â€¢ Show success toast                               â”‚
â”‚                                                         â”‚
â”‚  5. Next button:                                       â”‚
â”‚     â€¢ Validate form                                    â”‚
â”‚     â€¢ Save to localStorage                             â”‚
â”‚     â€¢ (Optional) Update backend API                    â”‚
â”‚     â€¢ Navigate to next step                            â”‚
â”‚                                                         â”‚
â”‚  6. Previous button:                                   â”‚
â”‚     â€¢ Save current data to localStorage                â”‚
â”‚     â€¢ Navigate to previous step                        â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                URL STRUCTURE

/damageDeclaration
  â””â”€â”€ page.tsx                           (Step 1: Create)
  
  â””â”€â”€ insurancePolicy/
      â””â”€â”€ [id]/
          â””â”€â”€ page.tsx                   (Step 2)
  
  â””â”€â”€ accident/
      â””â”€â”€ [id]/
          â””â”€â”€ page.tsx                   (Step 3)
  
  â””â”€â”€ cases/
      â””â”€â”€ [id]/
          â””â”€â”€ page.tsx                   (Step 4)
  
  â””â”€â”€ documents/
      â””â”€â”€ [id]/
          â””â”€â”€ page.tsx                   (Step 5)
  
  â””â”€â”€ review/
      â””â”€â”€ [id]/
          â””â”€â”€ page.tsx                   (Step 6)
  
  â””â”€â”€ components/
      â”œâ”€â”€ insurance-info-form.tsx        âœ… DONE
      â”œâ”€â”€ insurance-policy-form.tsx      âœ… DONE
      â”œâ”€â”€ accident-form.tsx              â³ TODO
      â”œâ”€â”€ damaged-items-form.tsx         â³ TODO
      â”œâ”€â”€ beneficiaries-form.tsx         â³ TODO
      â”œâ”€â”€ review-summary.tsx             â³ TODO
      â””â”€â”€ verificationIdentityResponse.tsx âœ… DONE


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                NAVIGATION FLOW

Browser URL automatically updates at each step:

Start:        /damageDeclaration
Submit Step 1 â†’ /damageDeclaration/insurancePolicy/abc123
Next          â†’ /damageDeclaration/accident/abc123
Next          â†’ /damageDeclaration/cases/abc123
Next          â†’ /damageDeclaration/documents/abc123
Next          â†’ /damageDeclaration/review/abc123
Submit        â†’ / (home) or success page

âœ¨ Users can use browser back/forward buttons
âœ¨ Users can bookmark or share specific step URLs
âœ¨ Page refreshes maintain progress via localStorage
```
